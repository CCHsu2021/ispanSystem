@model MSITTeam1Admin.ViewModels.CProductAdminViewModel
@{
    ViewData["Title"] = "Create";
}

<h1>Create</h1>

<h4>TProduct</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form asp-action="Create" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="ProductId" class="control-label"></label>
                <input type="hidden" id="productId-input" value="@ViewBag.productId" asp-for="ProductId" class="form-control" />
                <span asp-validation-for="ProductId" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Type" class="control-label"></label>
                <input asp-for="Type" class="form-control" />
                <span asp-validation-for="Type" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Name" class="control-label"></label>
                <input asp-for="Name" class="form-control" />
                <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Price" class="control-label"></label>
                <input asp-for="Price" class="form-control" />
                <span asp-validation-for="Price" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Cost" class="control-label"></label>
                <input asp-for="Cost" class="form-control" />
                <span asp-validation-for="Cost" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="ImgPath" class="control-label"></label>
                <input type="file" name="photo" class="form-control" />
            </div>
            <div class="form-group">
                <label asp-for="Barcode" class="control-label"></label>
                <input asp-for="Barcode" class="form-control" />
                <span asp-validation-for="Barcode" class="text-danger"></span>
            </div>
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-primary" id="check-create" />
            </div>
        </form>
    </div>
</div>

@section Scripts{
    @*<script>
        $("#check-create").click(function () {
            $.ajax({
                type: "Post",
                url: "../Products/createNewProduct",
                data: { productId: $("#productId-input").val()},
                dataType: "text",
                success: function (message) {
                    if (message == "此產品ID已被使用") {
                        Swal.fire("Uh Oh!", message, "warning");
                    } else if (message == "新增成功") {
                        Swal.fire("太棒了!", message, "success").then((result) => {
                            if (result.isConfirmed) {
                                window.location = "../Products";
                            }
                        })
                    }
                }
            })
        })
    </script>*@

    @*
                @if (ViewBag.Message != null)
                {
                    <script>
                        $(document).on('click', '#check-create', function (e) {
                            swal({
                                type: 'error',
                                title: '此商品ID已被使用',
                                showConfirmButton: false,
                            })
                        });
                    </script>
        }
    *@
}
<div>
    <a asp-action="Index">Back to List</a>
</div>

