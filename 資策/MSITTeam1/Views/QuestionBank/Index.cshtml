@addTagHelper *, MSITTeam1
@{
    ViewData["Title"] = "Index";
    ViewData["Title"] = "List";
}
<link href="~/css/MemberCenter.css" rel="stylesheet">
<link href="~/css/QuestionBankStyleSheet.css" rel="stylesheet" />
<link href="~/css/barRating.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
@{
    string k = null;
    string s = null;
    string t = null;

    if (ViewBag.k != null)
    {
        k = (ViewBag.k).ToString();
    }

    if (ViewBag.s != null)
    {
        s = (ViewBag.s).ToString();
    }
    if (ViewBag.t != null)
    {
        t = (ViewBag.t).ToString();
    }
}

<div id="cont-about" class="container-fluid py-4">
    <div class="container">
        @*<h4 class="my-3 pl-2">歡迎回來! @ViewBag.Name</h4>*@
        <div class="row about-content">
            <!-- Nav pills -->
            <div class="col-sm-3">
                <ul class="nav nav-pills flex-column" role="tablist">
                    <li class="nav-item">
                        <a class="vertical-tabs-member first-vertical-tabs active mb-1" data-toggle="pill" href="#home">試卷管理</a>
                    </li>
                    <li class=" nav-item">
                        <a class="vertical-tabs-member mb-1" data-toggle="pill" href="#menu1">題庫系統</a>
                    </li>
                    <li class="nav-item">
                        <a class="vertical-tabs-member mb-1" data-toggle="pill" href="#menu2">分析報告</a>
                    </li>
                </ul>
            </div>
            <!-- Tab panes -->
            <div class="col-sm-9">
                <div class="tab-content shadow-sm">
                    <div id="home" class="container tab-pane active">
                    </div>
                    <div id="menu1" class="container tab-pane fade">
                        <div style="margin:20px">
                            <form method="post" action="~/QuestionBank/List" enctype="application/x-www-form-urlencoded">
                                <div class="form-group row justify-content-around py-4">
                                    <div class="row">
                                        <div class="col">
                                            <select id="FSubjectId" name="FSubjectId" class="form-control"></select>
                                        </div>
                                        <div class="col">
                                            <select id="FQuestionTypeId" class="form-control">
                                                <option value="1">單選題</option>
                                                <option value="2">多選題</option>
                                                <option value="3">填空題</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="input-group input-group-rounded">
                                            <input type="text" placeholder="查詢關鍵字" name="keyword" class="form-control" id="searchBarSim">
                                            @*<span class="input-group-btn"><button class="btn btn-primary btn-group-right" type="button" id="search"><i class="fas fa-search"></i></button></span>*@
                                            <span class="input-group-btn"><button class="btn btn-primary btn-group-right" type="submit" id="search"><i class="fas fa-search"></i></button></span>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div id="menu1" class="container tab-pane fade">
                        <vc:question-bank-list keyword=@k Subjects=@s Type=@t></vc:question-bank-list>
                    </div>
                    <div id="menu2" class="container tab-pane fade">
                        <a asp-action="Edit" data-toggle="modal" data-target="#questionEdit">新增</a>
                        
                    </div>
                    <div id="menu3" class="container tab-pane fade">
                        <div class="row about-box">
                            <h3 class="text-center">分析報告</h3>
                            <p>
                                AntenaGames is small indie game studio based in Croatia. Founded in 2020,
                                on a mission to make beautiful, fun and popular mobile games. The first game released
                                was BallBoy, which belongs to franchise also called BallBoy, with game titles such as
                                "BallBoy", "BallBoy Plus" and "BallBoy (...)". Building strong and loyal community with
                                happy players that will come back to play our games is something that we really enjoy
                                doing.
                            </p>
                            <p>
                                Founder & CEO<br />
                                A.K.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="questionEdit" tabindex="-1" aria-labelledby="questionEdit" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">題目修改</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <vc:question-bank-create></vc:question-bank-create>
            </div>
        </div>
    </div>
</div>


@section Scripts
{
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://your-site-or-cdn.com/fontawesome/v6.1.1/js/all.js" data-auto-replace-svg="nest"></script>
    <script src="~/js/jquery.barrating.js"></script>
    <script src="~/js/barRating.init.js"></script>
    <script src="~/js/QuestionBankSystem.js"></script>
    <script>

        const selSubject = document.querySelector('#FSubjectId');

        async function LoadSubject() {
            const responseSubject = await fetch('@Url.Content("~/QuestionBank/Subject")');
            renderSubject(await responseSubject.json());
        }

        LoadSubject();

        function renderSubject(datas) {
            datas.forEach((item) => {
                const opt = new Option(item.fClassCategory, item.fClassCategory);
                selSubject.options.add(opt);
            })
        }
    </script>

}

